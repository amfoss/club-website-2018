{% extends 'base/base.html' %}
{% load static %}
{% block content %}

    <div class="container">
        <div class="row">
            <br>
            <h1 class="head col-md-12"><strong>Project Details</strong></h1>
            <hr>
            <br>
            <div class="card mb-3">
                {% if object.image %}
                    <img class="card-img-top img-fluid" src="static/media/{{ object.image }}">
                {% else %}
                    <img class="card-img-top img-fluid" src="{% static 'projects/images/default.png' %}">
                {% endif %}
                <div class="card-block">
                    <h4 class="card-title">{{ object.title }}</h4>
                    <p class="card-text">{{ object.description }}</p>
                    <p class="card-text">Link: <a href="{{ object.url }}">{{ object.url }}</a></p>
                    <p class="card-text">
                        <small class="text-muted">
                            Added by : {{ object.created_by.first_name }} {{ object.created_by.last_name }},
                            {{ object.date }}
                        </small>
                    </p>
                    {% if edit_permission %}
                        <a href="{% url 'project_update' object.id %}">
                            <button type="submit" class="btn btn-dark anim-scroll">Update</button>
                        </a>
                        <a href="{% url 'project_delete' object.id %}">
                            <button type="submit" class="btn btn-danger add-btn">Delete</button>
                        </a>
                        <a href="{% url 'screenshot_list' object.id %}">
                            <button type="submit" class="btn btn-dark anim-scroll">View Screenshots</button>
                        </a>
                    {% endif %}
                </div>
            </div>


            <br><br>
        </div>
        <div class="row">
            <div class="col-md-6">
                <ul class="list-group">
                    <div class="margin-20"></div>
                    <li class="list-group-item justify-content-between">
                        <h5>Project members</h5>
                        <span class="badge badge-default badge-pill">{{ user_count }}</span>
                    </li>
                    {% for project in project_list %}
                        <li class="list-group-item justify-content-between">
                            {{ project.user.first_name }} {{ project.user.last_name }}
                            <form method="post" action="{% url "project_member_delete" project.id %}">
                                {% csrf_token %}
                                <button type="submit" class="close">×</button>
                            </form>
                        </li>
                    {% endfor %}
                    <br>
                    {% if edit_permission %}
                        <div onclick="showForm()" class="col-md-1 offset-md-3">
                            <button class="btn btn-dark anim-scroll">
                                Add student
                            </button>
                        </div>

                    {% endif %}
                </ul>
                <br><br><br>

                <div class="card student-form" id="student-form" style="display: none">
                    <div class="card-block">
                        <form class="form-group col-md-6" action="" method="post">
                            {% csrf_token %}
                            <label for="exampleInputEmail1"><h4>Add Student</h4></label>
                            <div class="dropdown">
                                <div class="row">
                                    <div class="col-md-10">
                                        <input id="search" onkeyup="myFunction()" class="form-control"
                                               data-toggle="dropdown" placeholder="Search..." autocomplete="off">
                                        <input type="hidden" id="search-id" name="user_id">
                                    </div>
                                    <div class="col-md-2">
                                        <button type="submit" class="btn btn-dark anim-scroll">Add</button>
                                    </div>
                                </div>

                                <div class="dropdown-menu" id="search-results">
                                    {% for user in all_users %}
                                        <p onclick="addText({{ user.id }}, '{{ user.first_name }} {{ user.last_name }}')"
                                           class="dropdown-item">{{ user.first_name }} {{ user.last_name }}</p>
                                    {% endfor %}
                                </div>
                            </div>
                            <small id="emailHelp" class="form-text text-muted">Search for a student above.
                            </small>
                        </form>
                    </div>
                </div>
            </div>


            <div class="col-md-6">
                <ul class="list-group">
                    <li class="list-group-item justify-content-between">
                        <h5>Languages & Frameworks</h5>
                    </li>
                    {% for i in languages %}

                        <li class="list-group-item justify-content-between">
                        <h6>{{ i.language }}</h6><br>
                        <form method="post" action="{% url "language_delete" i.id %}">
                            {% csrf_token %}
                            <button type="submit" class="close">×</button>
                        </form>
                    {% endfor %}
                    </li>
                    {% if edit_permission %}
                        <br>
                        <div class="col-md-6 offset-md-3">
                            <a href="{% url 'language_create' object.id %}">
                                <button class="btn btn-dark anim-scroll">Add Language</button>
                            </a>
                        </div>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
