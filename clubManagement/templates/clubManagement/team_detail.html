<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>FOSS@Amrita. Code | Share | Grow</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="{% static 'home/assets/images/favicon.png' %}">
    <link rel="apple-touch-icon" href="{% static 'home/assets/images/apple-touch-icon.png' %}">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'home/assets/images/apple-touch-icon-72x72.png' %}">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'home/assets/images/apple-touch-icon-114x114.png' %}">
    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,400italic,700' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700' rel='stylesheet' type='text/css'>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,400italic,700' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700' rel='stylesheet' type='text/css'>

    <!-- Bootstrap core CSS -->
    <link href="{% static 'home/assets/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Icon Fonts -->
    <link href="{% static 'home/assets/css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'home/assets/css/et-line-font.min.css' %}" rel="stylesheet">

    <!-- Plugins -->
    <link href="{% static 'home/assets/css/magnific-popup.css' %}" rel="stylesheet">
    <link href="{% static 'home/assets/css/owl.carousel.css' %}" rel="stylesheet">
    <link href="{% static 'home/assets/css/superslides.css' %}" rel="stylesheet">
    <link href="{% static 'home/assets/css/vertical.min.css' %}" rel="stylesheet">

    <!-- Template core CSS -->
    <link href="{% static 'home/assets/css/template.css' %}" rel="stylesheet">
</head>

<body>

<!-- PRELOADER -->
<div class="page-loader">
    <div class="loader">Loading...</div>
</div>
<!-- /PRELOADER -->

<!-- Incudes navigation bar.  -->
{% include 'home/side-nav.html' %}

<!-- WRAPPER -->
<div class="wrapper">

    <!-- HERO -->
    <section id="hero" class="module-hero bg-dark-30"
             data-background="{% static 'BlogFeedAggregator/assets/images/mike-giles-wallpape.jpg' %}">

        <!-- HERO TEXT -->
        <div class="hero-caption">
            <div class="hero-text">
                <h1 class="hero-title font-alt">Team</h1>
                <p class="hero-subtitle font-serif"></p>
            </div>
        </div>
        <!-- /HERO TEXT -->

    </section>
    <!-- /HERO -->

    <!-- BLOG -->


    <section class="module">
        <div class="container-fluid container-custom">

            <div class="row">

                <div class="col-sm-8 col-sm-offset-2">

                    <div class="container">
                        <div class="row">

                            <div class="col-md-4">
                                <h3>Team details</h3>
                                <div class="card mb-3">
                                    <img class="card-img-top img-fluid" src="/static/media/{{ object.image }}">
                                    <div class="card-block">
                                        <h4 class="card-title">{{ object.name }}</h4>
                                        <p class="card-text">{{ object.description }}</p>
                                        <p class="card-text">
                                            <small class="text-muted">
                                                Added by
                                                : {{ object.created_by.first_name }} {{ object.created_by.last_name }}
                                            </small>
                                        </p>
                                        {% if edit_permission %}
                                            <a href="{% url 'team_update' object.id %}">
                                                <button type="submit" class="btn btn-dark anim-scroll">Update</button>
                                            </a>
                                            <a href="{% url 'team_delete' object.id %}">
                                                <button type="submit" class="btn btn-danger add-btn">Delete</button>
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="card student-form" id="student-form" style="display: none">
                                    <div class="card-block">
                                        <form class="form-group col-md-6" action="" method="post">
                                            {% csrf_token %}
                                            <div class="dropdown">
                                                <input id="search" onkeyup="myFunction()" class="form-control"
                                                       data-toggle="dropdown" placeholder="Search..."
                                                       autocomplete="off">
                                                <input type="hidden" id="search-id" name="user_id">
                                                <div class="dropdown-menu" id="search-results">
                                                    {% for user in all_users %}
                                                        <p onclick="addText({{ user.id }}, '{{ user.first_name }} {{ user.last_name }}')"
                                                           class="dropdown-item">{{ user.first_name }} {{ user.last_name }}</p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            <small id="emailHelp" class="form-text text-muted">Search for a student
                                                above.
                                            </small>
                                            <button type="submit" class="btn btn-secondary add-btn">Add</button>
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <ul class="list-group col-md-4">
                                <div class="margin-20"></div>
                                <li class="list-group-item justify-content-between">
                                    <h5>Team members</h5>
                                    <span class="badge badge-default badge-pill">{{ user_count }}</span>
                                </li>
                                {% for resp in responsibility_list %}
                                    <li class="list-group-item justify-content-between">
                                        <a class="link" href="{% url 'profile' resp.user.id %}">
                                            {{ resp.user.first_name }} {{ resp.user.last_name }}
                                        </a>
                                        <form method="post" action="{% url "team_member_delete" resp.id %}">
                                            {% csrf_token %}
                                            <button type="submit" class="close">Ã—</button>
                                        </form>
                                    </li>
                                {% endfor %}
                                {% if edit_permission %}
                                    <div onclick="showForm()" class="col-md-6 offset-md-3">
                                        <button class="btn btn-secondary add-btn">
                                            Add student
                                        </button>
                                    </div>
                                {% endif %}
                            </ul>

                        </div>
                    </div>

                </div>
                <!-- .col-* -->

            </div>
            <!-- .row -->

        </div>
    </section>
    <!-- /BLOG -->

    <hr class="divider">


    <!-- Footer section -->
    {% include 'home/footer.html' %}

</div>
<!-- /WRAPPER -->

<!-- JAVASCRIPT FILES -->
<script src="{% static 'home/assets/js/jquery-2.1.4.min.js' %}"></script>
<script src="{% static 'home/assets/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'home/assets/js/jquery.superslides.min.js' %}"></script>
<script src="{% static 'home/assets/js/jquery.mb.YTPlayer.min.js' %}"></script>
<script src="{% static 'home/assets/js/imagesloaded.pkgd.js' %}"></script>
<script src="{% static 'home/assets/js/isotope.pkgd.min.js' %}"></script>
<script src="{% static 'home/assets/js/jquery.magnific-popup.min.js' %}"></script>
<script src="{% static 'home/assets/js/owl.carousel.min.js' %}"></script>
<script src="{% static 'home/assets/js/jquery.fitvids.js' %}"></script>
<script src="{% static 'home/assets/js/jqBootstrapValidation.js' %}"></script>
<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script src="{% static 'home/assets/js/gmap3.min.js' %}"></script>
<script src="{% static 'home/assets/js/appear.js' %}"></script>
<script src="{% static 'home/assets/js/smoothscroll.js' %}"></script>
<script src="{% static 'home/assets/js/submenu-fix.js' %}"></script>
<script src="{% static 'home/assets/js/contact.js' %}"></script>
<script src="{% static 'home/assets/js/custom.js' %}"></script>

</body>

</html>


<script>
    function showForm() {
        var form = document.getElementById('student-form');
        if (form.style.display === 'none') {
            form.style.display = 'block';
        }
        else {
            form.style.display = 'none';
        }
    }

    function myFunction() {
        // Declare variables
        var input, filter, items, i;
        input = document.getElementById('search');
        filter = input.value.toUpperCase();
        items = document.getElementsByClassName('dropdown-item');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < items.length; i++) {
            if (items[i].innerHTML.toUpperCase().indexOf(filter) > -1) {
                items[i].style.display = "";
            } else {
                items[i].style.display = "none";
            }
        }
    }

    function addText(id, name) {
        var inp1 = document.getElementById('search');
        var inp2 = document.getElementById('search-id');
        inp1.value = name;
        inp2.value = id;
    }
</script>
